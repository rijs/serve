!function e(t,r,n){function o(u,a){if(!r[u]){if(!t[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[u]={exports:{}};t[u][0].call(d.exports,function(e){var r=t[u][1][e];return o(r?r:e)},d,d.exports,e,t,r,n)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(e,t,r){"use strict";function n(e){return i("creating"),e.render=o(e)(e.render),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return function(t){return function(r){var n=(0,str)((0,attr)(r,"is")).split(" ").map((0,from)(e.resources)).filter((0,header)("content-type","application/javascript")),o=(0,str)((0,attr)("css")(r)).split(" ");n.filter((0,by)("headers.needs",(0,includes)("[css]"))).map((0,key)("name")).map((0,append)(".css")).filter((0,not)(is.in(o))).map(function(e){return(0,attr)("css",((0,str)((0,attr)("css")(r))+" "+e).trim())(r)});var i=t(r);return i&&i.state?n.map((0,key)("body")).map(function(e){return e.call(i,i.state)}):void 0}}},i=window.log("[ri/features]")},{}],2:[function(e,t,r){"use strict";function n(e){return a("creating"),e.render=i(e)(e.render),e}var o=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=function(e){return function(t){return function(r){var n=(0,lo)(r.nodeName);if(n in e.resources){var i=e.resources[n].headers,a=i.attrs=i.attrs||u(i.needs,n);return a.map(function(e){var t=o(e,2),n=t[0],i=t[1];return i.some(function(e){var t=(0,attr)(r,n)||"";return(0,includes)(e)(t)?!1:(0,attr)(r,n,(t+" "+e).trim())})}).some(Boolean)?r.draw():t(r)}}}},u=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments[1];return e.split("[").slice(1).map((0,replace)("]","")).map((0,split)("=")).map(function(e){var r=o(e,2),n=r[0],i=r[1];return i?[n,i.split(" ")]:"css"==n?[n,[t+".css"]]:[n,[]]})},a=window.log("[ri/needs]");window.err("[ri/needs]")},{}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(0,I.default)();return(0,d.default)(t),(0,U.default)(t),(0,$.default)(t),(0,G.default)(t),(0,K.default)(t),(0,_.default)(t),(0,R.default)(t),(0,W.default)(t,e),(0,s.default)(t),(0,h.default)(t),(0,B.default)(t),(0,m.default)(t),(0,M.default)(t),(0,b.default)(t),(0,O.default)(t),(0,T.default)(t),(0,L.default)(e),(0,H.default)(t,e),(0,u.default)(t),(0,l.default)(t,e),(0,w.default)(t),(0,E.default)(t,e),t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var i=e("rijs.backpressure"),u=n(i),a=e("rijs.components"),s=n(a),c=e("rijs.singleton"),d=n(c),f=e("rijs.sessions"),l=n(f),p=e("rijs.reactive"),m=n(p),y=e("rijs.features"),h=n(y),v=e("rijs.prehtml"),b=n(v),g=e("rijs.offline"),w=n(g),j=e("rijs.helpers"),_=n(j),k=e("rijs.precss"),M=n(k),x=e("rijs.shadow"),O=n(x),P=e("rijs.resdir"),E=n(P),N=e("rijs.mysql"),R=n(N),q=e("rijs.serve"),L=n(q),S=e("rijs.delay"),T=n(S),A=e("rijs.needs"),B=n(A),C=e("rijs.sync"),H=n(C),D=e("rijs.core"),I=n(D),F=e("rijs.data"),U=n(F),V=e("rijs.html"),$=n(V),z=e("rijs.css"),G=n(z),J=e("rijs.fn"),K=n(J),Q=e("rijs.db"),W=n(Q);!window.ripple&&o()},{"rijs.backpressure":6,"rijs.components":7,"rijs.core":10,"rijs.css":12,"rijs.data":13,"rijs.db":5,"rijs.delay":14,"rijs.features":1,"rijs.fn":15,"rijs.helpers":16,"rijs.html":17,"rijs.mysql":5,"rijs.needs":2,"rijs.offline":18,"rijs.precss":19,"rijs.prehtml":21,"rijs.reactive":22,"rijs.resdir":5,"rijs.serve":5,"rijs.sessions":5,"rijs.shadow":23,"rijs.singleton":24,"rijs.sync":25}],4:[function(){},{}],5:[function(e,t){t.exports=function(e){return e}},{}],6:[function(e,t,r){"use strict";function n(e){return p("creating"),e.io?(e.draw=o(e)(e.draw),e.render=f(e)(e.render),e.deps=c,i(e)):e}function o(e){var t=function(){return(0,all)(":unresolved").filter((0,not)((0,key)("requested"))).map((0,key)("requested",!0)).map(e.draw)};return function(e){return function(r){var n=!(r||this&&(this.nodeName||this.node)),o=e.apply(this,arguments);return(m||y&&n)&&h(t),o}}}function i(e){return s(e),l(e.draw),l(y?u(e):function(){return(0,all)("*").filter((0,by)("nodeName",(0,includes)("-"))).map(e.draw)}),e}function u(e){var t=new MutationObserver(a(e));return function(){return t.observe(document.body,{childList:!0,subtree:!0})}}function a(e){return function(t){return t.map((0,key)("addedNodes")).map(to.arr).reduce(flatten,[]).filter((0,by)("nodeName",(0,includes)("-"))).map(e.draw)}}function s(e){(0,group)("pulling cache",function(){return((0,parse)(localStorage.ripple)||[]).map(function(e){var t=e.name;return p(t)}).map(function(t){return e.io.emit("change",{name:t,headers:b})})})}function c(e){return d([(0,key)("nodeName"),(0,attr)("data"),(0,attr)("css")])(e)}function d(e){return function(t){return e.map(function(e){return e(t)}).filter(Boolean).map(lo).map((0,split)(" ")).reduce(flatten,[]).filter(unique)}}function f(e){return function(t){return function(r){var n=e.deps(r);return n.filter((0,not)(is.in(e.resources))).map(function(e){return g("pulling",e),e}).map(function(t){return e.io.emit("change",{name:t,headers:b})}).length?!1:t(r)}}}function l(e){return document.body?e():document.addEventListener("DOMContentLoaded",function(){return e()})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var p=window.log("[ri/backpressure]"),m=(window.err("[ri/backpressure]"),!!document.head.createShadowRoot),y=!!document.registerElement,h=requestAnimationFrame,v=!0,b={"content-type":"text/plain",pull:v},g=noop},{}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return j("creating"),M||(0,ready)(f(e)),(0,values)(e.types).map(function(t){return t.parse=(0,proxy)(t.parse,l(e))}),(0,key)("types.application/javascript.render",(0,wrap)((0,w.default)(e)))(e),(0,key)("types.application/data.render",(0,wrap)((0,b.default)(e)))(e),e.draw=i(e),e.render=d(e),e.on("change",e.draw),e}function i(e){return function(t){return this&&this.nodeName?c(e)(this):this&&this.node?c(e)(this.node()):t?t instanceof k?c(e)(t.target):t[0]instanceof k?c(e)(t[0].target):t.nodeName?c(e)(t):t.node?c(e)(t.node()):t.name?a(e)(t.name):is.str(t)?a(e)(t):_("could not update",t):u(e)}}function u(e){var t=(0,values)(e.resources).filter((0,header)("content-type","application/javascript")).map((0,key)("name")).join(",");return t?(0,all)(t).map(c(e)):[]}function a(e){return function(t){var r=e.resources[t],n=(0,header)("content-type")(r);return(e.types[n].render||noop)(r)}}function s(e){return function(t){return!t.pending&&(t.pending=requestAnimationFrame(function(){return delete t.pending,e.render(t)}))}}function c(e){return function(t){if("#document-fragment"==t.nodeName)return c(e)(t.host);if("#text"==t.nodeName)return c(e)(t.parentNode);if(t.matches(x)&&null==(0,attr)(t,"inert"))return t.on||(0,emitterify)(t),t.draw||(t.draw=function(){return e.draw(t)}),s(e)(t),t}}function d(e){return function(t){var r=(0,lo)(t.tagName),n=(0,attr)(t,"data"),o=(0,body)(e)(r),i=h(e)(n);if(!o)return t;if(n&&!i)return t;try{o.call(t.shadowRoot||t,p(t,i))}catch(e){_(e,e.stack)}return t}}function f(e){return function(){if("undefined"!=typeof MutationObserver){document.body.muto&&document.body.muto.disconnect();var t=document.body.muto=new MutationObserver(y(e)),r={childList:!0,subtree:!0};t.observe(document.body,r)}}}function l(){return function(e){return delete e.headers.pending,e}}function p(e,t){return e.state=e.state||{},m(e.state)(t),m(e.state)(e.__data__),e.__data__=e.state,e.state}function m(e){return function(t){return is.obj(t)&&(0,keys)(t).map((0,copy)(t,e))}}function y(e){return function(t){return 0|t.map((0,key)("addedNodes")).map(to.arr).reduce(flatten).filter((0,by)("nodeName",(0,includes)("-"))).map(e.draw)}}function h(e){return function(t){var r={},n=t?t.split(" "):[];return n.map(function(t){return r[t]=(0,body)(e)(t)}),n.length?(0,values)(r).some(is.falsy)?void 0:r:void 0}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var v=e("./types/data"),b=n(v),g=e("./types/fn"),w=n(g),j=window.log("[ri/components]"),_=window.err("[ri/components]"),k=window.MutationRecord||noop,M=!!document.registerElement,x=M?"html *, :host-context(html) *":"html *";Element.prototype.matches=Element.prototype.matches||Element.prototype.msMatchesSelector},{"./types/data":8,"./types/fn":9}],8:[function(e,t,r){"use strict";function n(e){return function(t){return(0,all)('[data~="'+t.name+'"]:not([inert])').map(e.draw)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],9:[function(e,t,r){"use strict";function n(e){return function(t){if(!i||!u(t)||o(t))return(0,all)(t.name+':not([inert])\n                 ,[is="'+t.name+'"]:not([inert])').map(e.draw);var r=Object.create(HTMLElement.prototype),n={prototype:r},a=t.headers.extends;a&&(n.extends=a),r.attachedCallback=e.draw,document.registerElement(t.name,n)}}function o(e){var t=(0,header)("extends")(e);return t?document.createElement(t,e.name).attachedCallback:document.createElement(e.name).attachedCallback}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=!!document.registerElement,u=function(e){return(0,includes)("-")(e.name)}},{}],10:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){function e(r,n,o){return r?is.arr(r)?r.map(e):is.obj(r)&&!r.name?e:is.fn(r)&&r.resources?e((0,values)(r.resources)):is.str(r)&&!n&&t[r]?t[r].body:!is.str(r)||n||t[r]?is.str(r)&&n?a(e)({name:r,body:n,headers:o}):is.obj(r)&&!is.arr(r)?a(e)(r):(l("could not find or create resource",r),!1):a(e)({name:r}):e}p("creating");var t={};return e.resources=t,e.resource=(0,chainable)(e),e.register=e,e.types=f(),(0,emitterify)(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var i=e("./types/text"),u=n(i),a=function(e){return function(t){var r=t.name,n=t.body,o=t.headers,i=void 0===o?{}:o;p("registering",r);var u=s(e)({name:r,body:n,headers:i}),a=e.resources[r]?"":"load";return u?(e.resources[r]=u,e.emit("change",[e.resources[r],{type:a}]),e.resources[r].body):(l("failed to register",r),!1)}},s=function(e){return function(t){return(0,header)("content-type")(t)||(0,values)(e.types).sort((0,za)("priority")).some(d(t)),(0,header)("content-type")(t)?c(e)(t):(l("could not understand resource",t),!1)}},c=function(e){return function(t){var r=(0,header)("content-type")(t);return e.types[r]?(e.types[r].parse||identity)(t):(l("could not understand type",r),!1)}},d=function(e){return function(t){return t.check(e)&&(e.headers["content-type"]=t.header)}},f=function(){return[u.default].reduce(to.obj("header"),1)},l=window.err("[ri/core]"),p=window.log("[ri/core]")},{"./types/text":11}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={header:"text/plain",check:function(e){return!(0,includes)(".html")(e.name)&&!(0,includes)(".css")(e.name)&&is.str(e.body)}}},{}],12:[function(e,t,r){"use strict";function n(e){return o("creating"),e.types["text/css"]={header:"text/css",check:function(e){return(0,includes)(".css")(e.name)}},e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=window.log("[ri/types/css]")},{}],13:[function(e,t,r){"use strict";function n(e){return i("creating"),e.on("change.data",o(e)),e.types["application/data"]={header:"application/data",check:function(e){return is.obj(e.body)||!e.body?!0:!1},parse:function(t){var r=e.resources[t.name]||{};return delete t.headers.listeners,(0,extend)(t.headers)(r.headers),!t.body&&(t.body=[]),!t.body.on&&(t.body=(0,emitterify)(t.body)),t.body.on.change=t.headers.listeners=t.headers.listeners||[],t.body.on("change.bubble",function(){return e.emit("change",[t],(0,not)(is.in(["data"])))}),t}},e}function o(e){return function(t){var r=[arguments[0].body,arguments[1]];return(0,header)("content-type","application/data")(t)&&e.resources[t.name].body.emit("change",to.arr(r),(0,not)(is.in(["bubble"])))}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=window.log("[ri/types/data]")},{}],14:[function(e,t,r){"use strict";function n(e){return i("creating"),e.render=o(e.render),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return function(t){var r=(0,attr)("delay")(t);null!=r?((0,attr)("inert","")(t),(0,attr)("delay",!1)(t),time(+r,function(){return(0,attr)("inert",!1)(t),t.draw()})):e(t)}},i=window.log("[ri/delay]");window.err("[ri/delay]")},{}],15:[function(e,t,r){"use strict";function n(e){return a("creating"),e.types["application/javascript"]={header:o,check:i,parse:u},e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o="application/javascript",i=function(e){return is.fn(e.body)},u=function(e){return e.body=(0,fn)(e.body),e},a=window.log("[ri/types/fn]")},{}],16:[function(e,t,r){"use strict";function n(e){return u("creating"),(0,values)(e.types).filter((0,by)("header","application/data")).filter(function(e){return e.parse=(0,proxy)(e.parse,o)}).filter(function(e){return e.to=(0,proxy)(e.to,i)}),e}function o(e){var t=e.headers.helpers;return(0,keys)(t).map(function(e){return t[e]=(0,fn)(t[e]),e}).map(function(r){return(0,def)(e.body,r,t[r])}),e}function i(e){var t=e.headers.helpers;return(0,keys)(t).filter(function(e){return is.fn(t[e])}).map(function(e){return t[e]=(0,str)(t[e])}),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var u=window.log("[ri/helpers]")},{}],17:[function(e,t,r){"use strict";function n(e){return o("creating"),e.types["text/html"]={header:"text/html",check:function(e){return(0,includes)(".html")(e.name)}},e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=window.log("[ri/types/html]")},{}],18:[function(e,t,r){"use strict";function n(e){return window.localStorage?(a("creating"),o(e),e.on("change.cache",(0,debounce)(1e3)(i(e))),e):void 0}function o(e){(0,group)("loading cache",function(){((0,parse)(localStorage.ripple)||[]).forEach(u(e))})}function i(e){return function(){a("cached");var t=(0,values)((0,clone)(e.resources)).filter((0,not)((0,header)("cache-control","no-store")));t.filter((0,header)("content-type","application/javascript")).map(function(t){return t.body=(0,str)(e.resources[t.name].body)}),localStorage.ripple=(0,str)(t)}}function u(e){return function(t){return t.headers.silent=!0,e(t)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var a=window.log("[ri/offline]");window.err("[ri/offline]")},{}],19:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return d("creating"),e.render=a(e)(e.render),(0,values)(e.types).filter((0,by)("header","text/css")).map(function(t){return t.render=(0,proxy)(t.render,c(e))}),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var i=e("cssscope"),u=n(i),a=function(e){return function(t){return function(r){var n,o=(0,str)((0,attr)(r,"css")).split(" ").filter(Boolean),i=r.shadowRoot||r,u=document.head,a=u.createShadowRoot&&r.shadowRoot;if(!o.length)return t(r);if(!o.some((0,not)(is.in(e.resources))))return n=o.map((0,from)(e.resources)).map((0,key)("body")).map(a?identity:s(o)),o.map(function(e){return(0,raw)('style[resource="'+e+'"]',a?i:u)||(0,el)("style[resource="+e+"]")}).map((0,key)("innerHTML",function(e,t){return n[t]})).filter((0,not)((0,by)("parentNode"))).map(function(e){return a?i.insertBefore(e,i.firstChild):u.appendChild(e)}),t(r)}}},s=function(e){return function(t,r){return(0,u.default)(t,'[css~="'+e[r]+'"]')}},c=function(e){return function(t){return(0,all)('[css~="'+t.name+'"]:not([inert])').map(e.draw)}},d=window.log("[ri/precss]");window.err("[ri/precss]")},{cssscope:20}],20:[function(e,t){t.exports=function(e,t){return e.replace(/^(?!.*:host)([^@%\n]*){/gim,function(e){return t+" "+e}).replace(/^(?!.*:host)(.*?),\s*$/gim,function(e){return t+" "+e}).replace(/:host\((.*?)\)/gi,function(e,r){return t+r}).replace(/:host /gi,t+" ").replace(/^.*:host-context\((.*)\)/gim,function(e,r){return r+" "+t})}},{}],21:[function(e,t,r){"use strict";function n(e){i("creating");var t=e.render;return(0,key)("types.text/html.render",(0,wrap)(o(e)))(e),e.render=function(r){var n,o=(0,attr)(r,"template");if(!o)return t.apply(this,arguments);if(!o||e(o))return n=document.createElement("div"),n.innerHTML=e(o),(r.shadowRoot||r).innerHTML=n.innerHTML,t(r)},e}function o(e){return function(t){return(0,all)('[template="'+t.name+'"]:not([inert])').map(e.draw)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=window.log("[ri/prehtml]");window.err("[ri/prehtml]")},{}],22:[function(e,t,r){"use strict";function n(e){return f("creating"),e.on("change.reactive",o(e)),e}function o(e){return function(t){if(is.obj(t.body)&&!(0,header)("reactive",!1)(t)&&!t.body.observer){if(!Object.observe)return s(e)(t);Array.observe(t.body,(0,def)(t.body,"observer",a(e)(t))),is.arr(t.body)&&t.body.forEach(i(e)(t))}}}function i(e){return function(t){return function(r){if(is.obj(r)&&!r.observer){var n=u(e)(t);(0,def)(r,"observer",n),Object.observe(r,n)}}}}function u(e){return function(t){return function(r){var n=t.body.indexOf(r[0].object),o=t.body[n],i="update",u={key:n,value:o,type:i};f("changed (c)".green,t.name.bold,(0,str)(n).grey,l?r:""),e.emit("change",[t,u],(0,not)(is.in(["reactive"])))}}}function a(e){return function(t){return function(r){r.map(d).filter(Boolean).map(function(e){return f("changed (p)".green,t.name.bold,e.key.grey),e}).map(function(r){return is.arr(t.body)&&"push"==r.type&&i(e)(t)(r.value),r}).map(function(r){return e.emit("change",[t,r],(0,not)(is.in(["reactive"])))})}}}function s(e){return function(t){e.observer||(e.observer=setInterval(c(e),100)),e.cache||(e.cache={}),e.cache[t.name]=(0,str)(t.body)}}function c(e){return function(){return e&&e.resources?void(0,keys)(e.cache).forEach(function(t){var r=e.resources[t];e.cache[t]!=(0,str)(r.body)&&(f("changed (x)",t),e.cache[t]=(0,str)(r.body),e.emit("change",[r],(0,not)(is.in(["reactive"]))))}):clearInterval(e.observer)}}function d(e){var t=e.type,r="delete"==t?e.oldValue:e.removed&&e.removed[0],n=e.object,o=e.name||(0,str)(e.index),i=n[o],u="update"==t&&(0,str)(i)==(0,str)(e.oldValue),a={key:o,value:r||i,type:"update"==t?"update":"delete"==t?"remove":"splice"==t&&r?"remove":"splice"!=t||r?"add"==t?"push":!1:"push"};return u?(f("skipping update"),!1):a}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var f=window.log("[ri/reactive]"),l=(window.err("[ri/reactive]"),!1)},{}],23:[function(e,t,r){"use strict";function n(e){return s("creating",document.head.createShadowRoot?"encapsulation":"closing gap"),e.render=o(e.render),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return function(t){return t.createShadowRoot?!t.shadowRoot&&t.createShadowRoot()&&(i(t),u(t)):(t.shadowRoot=t,t.shadowRoot.host=t),a(e(t))}},i=function(e){return e.shadowRoot.innerHTML=e.innerHTML},u=function(e){return keys(e).concat(["on","once","emit","classList","getAttribute","setAttribute"]).map(function(t){return e.shadowRoot[t]=is.fn(e[t])?e[t].bind(e):e[t]})},a=function(e){return keys(e).map(function(t){return e.shadowRoot[t]=e[t]})},s=window.log("[ri/shadow]");window.err("[ri/shadow]")},{}],24:[function(e,t,r){"use strict";function n(e){return o("creating"),owner.ripple||(owner.ripple=e),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=window.log("[ri/singleton]")},{}],25:[function(e,t,r){"use strict";function n(e,t){return b("creating"),(0,values)(e.types).map(c(e)),e.sync=l(e),e.io=f(t),e.on("change",function(t){return l(e)()(t.name)}),e.io.on("change",d(e)),e.io.on("connection",function(t){return t.on("change",o(e))}),e.io.on("connection",function(t){return l(e)(t)()}),e.io.use(y),e}function o(e){return function(t){function r(r){var i=(0,key)(r)(f),u=t.name,a=r.replace(/(^|\.)_/g,"$1"),l=1==i.length?"push":2==i.length?"update":0===i[2]?"remove":"",p="update"==l?i[1]:i[0],m=w[l];return l?!s||s.call(n,p,c,a,l,u,m)?(a?m(a,p,c,u,o):d(e)(t),!0):void 0:!1}b("receiving",t.name);var n=this,o=e.resources[t.name],u=h(e)(t).from||identity;if(!o)return b("no resource",t.name);if(!u.call(this,t))return g("type skip",t.name);if(!is.obj(o.body))return d(e)(t);var a=(0,header)("proxy-to")(o)||identity,s=(0,header)("proxy-from")(o),c=a.call(n,(0,key)("body")(o)),f=(0,v.diff)(c,t.body);return is.arr(f)?r("")&&o.body.emit("change"):void((0,keys)(f).reverse().filter((0,not)((0,is)("_t"))).map(i(f)).reduce(flatten,[]).map(r).some(Boolean)&&o.body.emit("change"))}}function i(e){return function(t){var r=(0,key)(t)(e);return t=is.arr(t)?t:[t],is.arr(r)?t.join("."):(0,keys)(r).map((0,prepend)(t.join(".")+".")).map(i(e))}}function u(e,t,r){var n=e.split("."),o=n.pop(),i=(0,key)(n.join("."))(r)||r;is.arr(i)?i.splice(o,0,t):(0,key)(e,t)(r)}function a(e,t,r){var n=e.split("."),o=n.pop(),i=(0,key)(n.join("."))(r)||r;is.arr(i)?i.splice(o,1):delete i[o]}function s(e,t,r){(0,key)(e,t)(r)}function c(e){return function(e){var t=e.parse||noop;e.parse=function(e){return t.apply(this,arguments),e}}}function d(e){return function(t){return t.headers.silent=!0,e(t)}}function f(t){var r=window.io?window.io():is.fn(e("socket.io-client"))?e("socket.io-client")():{on:noop,emit:noop};return r.use=r.use||noop,r}function l(e){return function(t){return function(r){if(!arguments.length||r){if(!r)return(0,values)(e.resources).map((0,key)("name")).map(l(e)(t)),e;var n=e.resources[r],o=[e.io],i=m(o.length,r),u=(0,header)("silent",!0)(n);return u?delete n.headers.silent:n?i(is.str(t)?o.filter((0,by)("sessionID",t)).map(p(e)(n)):t?[p(e)(n)(t)]:o.map(p(e)(n))):b("no resource to emit: ",r)}}}}function p(e){return function(t){return function(r){var n,o=is.fn(t.body)?""+t.body:t.body,i={type:h(e)(t).to||identity,res:t.headers["proxy-to"]||identity};return(o=i.res.call(r,o))&&(n=i.type.call(r,{name:t.name,body:o,headers:t.headers}))?(r.emit("change",n),!0):!1}}}function m(e,t){return function(r){b((0,str)(r.filter(Boolean).length).green.bold+"/"+(0,str)(e).green,"sending",t)}}function y(e,t){e.ip=e.request.headers["x-forwarded-for"]||e.request.connection.remoteAddress,t()}function h(e){return function(t){return e.types[(0,header)("content-type")(t)]}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var v=e("jsondiffpatch"),b=window.log("[ri/sync]"),g=(window.err("[ri/sync]"),noop),w={push:u,remove:a,update:s}},{jsondiffpatch:4,"socket.io":4,"socket.io-client":4}]},{},[3]);